#auther 徐梓豪 2016.06.08
#editor 徐梓豪 2016.06.29

Feature:运营商过滤订单信息
"""
	1.通过客户名称查询
	2.通过来源商城查询
	3.通过下单时间查询
	4.通过商品名称查询
		通过商品名称模糊查询
		通过商品名称精确查询
"""

Background
	Given manager登录管理系统
	When manager添加账号
	"""
		[{
			"account_type":"体验客户",
			"account_name":"土小宝",
			"login_account":"tuxiaobao",
			"password":123456,
			"ramarks":"土小宝客户体验账号"
		},{
			"account_type":"运营",
			"account_name":"运营部门",
			"login_account":"yunying",
			"password":123456,
			"ramarks":"运营部门"
		}]
	"""

	"""
	When tuxiaobao使用密码123456登录管理系统
	When tuxiaobao添加商品
	"""
		[{
			"name":"武汉鸭脖",
			"title"："周黑鸭 鲜卤鸭脖 230g/袋 办公室休闲零食 肉干小食",
			"price":9.9,
			"setlement_price":9.9,
			"weight":0.23,
			"repertory":{
						"is_limit":"on",
						"limit_num":500
			},
			"picture":"",
			"description":"周黑鸭 鲜卤鸭脖 230g/袋 办公室休闲零食 肉干小食"
			},{
			"name":"NIKE耐克男鞋便减震舒适休闲跑步鞋",
			"title"："旗舰店—618粉丝狂欢， 赢200元粉丝券!",
			"price":322,
			"setlement_price":298,
			"weight":0.5,
			"repertory":{
						"is_limit":"off"
			},
			"description":"旗舰店—618粉丝狂欢，关注微信公众号"jdxyyz" 赢200元粉丝券!"
		}]
	"""

	When yunying使用密码123456登录管理系统
	When yunying关联商品'周黑鸭'
	{
		"""
			"shop_name":"微众白富美",
			"good_id":"2401"
		"""
	}

	Then yunying得到商品列表
	|   good_name   | client_name | sales |  business_id   |
	|    武汉鸭脖   |   土小宝    |  0.00 | 微众白富美:2401|    
	|    耐克男鞋   |   土小宝    |  0.00 |                |

	When 微信用户批量消费aini在云商通商家'微众家'关联的商品
		|	order_id	  | date       | consumer |    type   |businessman|   product | payment  | payment_method | freight |   price  | product_integral |  	 coupon  		| paid_amount |	weizoom_card 		| alipay | wechat | cash |      action       |  order_status   |
		|20160628174526794| 2016-06-12 | bill     |    购买   | 微众商城   | 武汉鸭脖  | 支付    | 支付宝         | 10      |   9.99   |      20.00       |                		|   199.80      |           		  | 199.80 | 0      | 0    |    jobs,支付      |  待发货         |
		|20160628174526795| 2016-06-12 | tom      |    购买   | 微众家     | 耐克男鞋  | 支付    | 支付宝         | 15      |  298.00  |       1.00       |        				|         298.00      |       	            | 298.00 | 0      | 0    |    jobs,支付      |  待发货         |	

	Then yunying查看订单列表
		|     order_id    |   date   | order_price | consumer | businessman | 
		|20160628174526794|2016-06-12|    199.80   |   bill   |   微众家    |
		|20160628174526795|2016-06-12|    298.00   |   tom    |   微众家    |


@penda @tuxiaobao
#Scenario1:运营通过'客户名称'过滤订单列表
	When yunying使用密码123456登录系统
	#模糊查询
	Whenn yunying设置订单列表的查询条件
	"""
	{
		"order_id":"794"
	}
	"""
	Then yunying能获得订单号中包含"001"的订单列表
		|     order_id    |   date   | order_price | consumer | businessman | 
		|20160628174526794|2016-06-12|    199.80   |   bill   |  微众商城   |
	"""
	#完全匹配
	When yunying设置订单列表的查询条件
	"""
	{
		"order_id":"20160628174526795"
	}
	"""

	Then yunying能获得订单号中是"20160628174526795"的订单列表
		|     order_id    |   date   | order_price | consumer | businessman | 
		|20160628174526795|2016-06-12|    298.00   |   tom    |   微众家    |

	When yunying设置订单列表的查询条件
	"""
	{
		"order_id":"20160628174526794"
	}
	"""

	Then yunying能获得订单号中是"20160628174526794"的订单列表
		|     order_id    |   date   | order_price | consumer | businessman | 
		|20160628174526794|2016-06-12|    199.80   |   bill   |  微众商城   |

	#无查询结果
	When yunying设置订单的查询条件
	"""
	{
		"order_id":"20160628174526797"
	}
	"""
	Then yunying能获得订单号中是"对应订单编号003"的订单列表
		|    order_id   |   date   | order_price | consumer | businessman | 

@penda @tuxiaobao
#Scenario2:运营通过来源商城过滤订单列表
	When yunying登录系统:penda
	Then yunying选择来源商城'微众商城'进行查询
	Then yunying获得来源商城是'微众商城'的订单列表
		|     order_id    |   date   | order_price | consumer | businessman | 
	Then yunying选择来源商城'微众家'进行查询
	Then yunying获得来源商城是'微众家'的订单列表
		|     order_id    |   date   | order_price | consumer | businessman | 
		|20160628174526794|2016-06-12|    199.80   |   bill   |  微众商城   |
		|20160628174526795|2016-06-12|    298.00   |   tom    |   微众家    |

@penda @tuxiaobao
#Scenario3:运营通过下单时间过滤订单列表
	When yunying登录系统:penda
	Then yunying选择下单时间为'2016-06-12 00:00'-'2016-06-13 00:00'进行查询
	Then yunying获得订单列表
		|     order_id    |   date   | order_price | consumer | businessman | 
		|20160628174526794|2016-06-12|    199.80   |   bill   |   微众家    |
		|20160628174526795|2016-06-12|    298.00   |   tom    |   微众家    |
	Then yunying选择下单时间为'2016-06-10 00:00'-'2016-06-11 00:00'进行查询
	Then yunying获得订单列表
		|     order_id    |   date   | order_price | consumer | businessman |

@penda @tuxiaobao
#Scenario4:运营通过商品名称过滤订单列表	
	When yunying登录系统:penda
	Then yunying使用商品名称包含'鸭脖'为条件过滤订单列表
	Then yunying获得订单列表
		|     order_id    |   date   | order_price | consumer | businessman | 
		|20160628174526794|2016-06-12|    199.80   |   bill   |   微众家    |
	Then yunying使用商品名称包含'耐克男鞋'为条件过滤订单列表
	Then yunying获得订单列表
		|     order_id    |   date   | order_price | consumer | businessman | 
		|20160628174526795|2016-06-12|    298.80   |   tom    |   微众家    |
	Then yuning使用商品名称包括'嘿嘿哈'为条件过滤订单列表
	Then yunying获得订单列表
		|     order_id    |   date   | order_price | consumer | businessman | 





